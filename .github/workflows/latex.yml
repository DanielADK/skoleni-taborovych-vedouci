name: LaTeX build

on:
  push:
    branches: [ "master" ]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    - name: Build pedagogy
      uses: xu-cheng/latex-action@master
      with:
        working_directory: "pedagogika"
        glob_root_file: true
        latexmk_use_xelatex: true
        root_file: "*.tex"
      
    - name: Cleaning trash
      working-directory: "./pedagogika"
      run: make clean
      
    - name: Upload Release Asset
      id: upload-release-asset 
      uses: actions/upload-release-asset@v1
